---
import type { MenuItem } from "@/types/MenuItem";
import { Icon } from "astro-icon/components";
import map from "lodash/map";
import startsWith from "lodash/startsWith";
import { twMerge } from "tailwind-merge";
import NavbarMenu from "./NavBarMobile";

const menu: MenuItem[] = [
  {
    title: "Про SVIY",
    href: "/",
    children: [
      { title: "Переваги", href: "/#advantages" },
      { title: "Планування", href: "/#apartaments" },
      { title: "Генплан", href: "/#genplan" },
      { title: "Локація", href: "/#location" },
      { title: "Тех.характеристики", href: "/#tech" },
    ],
  },
  {
    title: "Квартири",
    href: "/apartaments",
  },
  {
    title: "Будівництво",
    href: "/buildings",
  },
  {
    title: "Контакти",
    href: "/contacts",
  },
];

const pathname = new URL(Astro.request.url).pathname;
---

<header
  class="px-5 py-8 bg-orange h-[100px] flex flex-row items-center justify-between"
>
  <div class="md:hidden"></div>
  <a class="flex flex-col items-center gap-1" href="/">
    <Icon name="logo" width={150} height={40} />
    <p class="uppercase text-sm">житловий комплекс</p>
  </a>
  <ul class="hidden md:flex flex-row items-center gap-4">
    {
      map(menu, (item) => (
        <li>
          <a
            href={item.href}
            class={twMerge(
              "uppercase text-xl font-medium hover:text-orange-hover",
              startsWith(pathname, item.href) && "underline"
            )}
          >
            {item.title}
          </a>
        </li>
      ))
    }
  </ul>
  <a class="hidden md:flex flex-col items-start" href="tel:0800000000">
    <p class="">передзвоніть мені</p>
    <p class="font-semibold text-2xl">0-800-00-000</p>
  </a>
  <NavbarMenu client:load menu={menu} />
</header>
